name: ğŸ“ Test Student Progress Tracking

on:
  push:
    branches: [assignment-*]
  pull_request:
    types: [opened]

jobs:
  detect-student-work:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ” Extract student info from branch
        id: extract
        run: |
          echo "ğŸ¯ GitHub Event: ${{ github.event_name }}"
          echo "ğŸ“ Ref: ${{ github.ref }}"
          echo "ğŸ”– Ref Name: ${{ github.ref_name }}"
          echo "ğŸ‘¤ Actor: ${{ github.actor }}"
          
          if [ "${{ github.event_name }}" = "push" ]; then
            BRANCH="${{ github.ref_name }}"
            echo "ğŸŒ¿ Branch: $BRANCH"
            
            # ĞŸÑ€Ğ¾Ğ±ÑƒĞµĞ¼ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ° Ğ¸Ğ· Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ²ĞµÑ‚ĞºĞ¸
            STUDENT=$(echo $BRANCH | cut -d'-' -f1)
            ASSIGNMENT=$(echo $BRANCH | cut -d'-' -f3)
            
            echo "ğŸ“Š Extracted Student: $STUDENT"
            echo "ğŸ“š Extracted Assignment: $ASSIGNMENT"
            
            echo "student=$STUDENT" >> $GITHUB_OUTPUT
            echo "assignment=$ASSIGNMENT" >> $GITHUB_OUTPUT
          fi

      - name: ğŸ“¢ Display results
        if: steps.extract.outputs.student
        run: |
          echo "âœ… AUTOMATION WORKING!"
          echo "ğŸ“ Student: ${{ steps.extract.outputs.student }}"
          echo "ğŸ“‹ Assignment: ${{ steps.extract.outputs.assignment }}"
          echo "ğŸŸ¡ Status: Student started working"
          
      - name: ğŸ“§ Simulate notification
        if: steps.extract.outputs.student
        run: |
          echo "ğŸ“¬ Would send notification to teacher:"
          echo "Student ${{ steps.extract.outputs.student }} started assignment ${{ steps.extract.outputs.assignment }}"
