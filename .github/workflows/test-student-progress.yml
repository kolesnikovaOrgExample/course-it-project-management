name: ğŸ“ Test Student Progress Tracking

on:
  push:
    branches: [assignment-*]
  pull_request:
    types: [opened]

# â†“â†“â†“ Ğ”ĞĞ‘ĞĞ’Ğ¬Ğ¢Ğ• Ğ­Ğ¢ĞĞ¢ Ğ‘Ğ›ĞĞš â†“â†“â†“
permissions:
  contents: write
  issues: write
  pull-requests: write
# â†‘â†‘â†‘ Ğ”ĞĞ‘ĞĞ’Ğ¬Ğ¢Ğ• Ğ­Ğ¢ĞĞ¢ Ğ‘Ğ›ĞĞš â†‘â†‘â†‘

jobs:
  detect-student-work:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ” Extract student info from branch
        id: extract
        run: |
          echo "ğŸ¯ GitHub Event: ${{ github.event_name }}"
          echo "ğŸ“ Ref: ${{ github.ref }}"
          echo "ğŸ”– Ref Name: ${{ github.ref_name }}"
          echo "ğŸ‘¤ Actor: ${{ github.actor }}"
          
          if [ "${{ github.event_name }}" = "push" ]; then
            BRANCH="${{ github.ref_name }}"
            echo "ğŸŒ¿ Branch: $BRANCH"
            
            STUDENT=$(echo $BRANCH | cut -d'-' -f1)
            ASSIGNMENT=$(echo $BRANCH | cut -d'-' -f3)
            
            echo "ğŸ“Š Extracted Student: $STUDENT"
            echo "ğŸ“š Extracted Assignment: $ASSIGNMENT"
            
            echo "student=$STUDENT" >> $GITHUB_OUTPUT
            echo "assignment=$ASSIGNMENT" >> $GITHUB_OUTPUT
          fi

      - name: ğŸ“¢ Display results
        if: steps.extract.outputs.student
        run: |
          echo "âœ… AUTOMATION WORKING!"
          echo "ğŸ“ Student: ${{ steps.extract.outputs.student }}"
          echo "ğŸ“‹ Assignment: ${{ steps.extract.outputs.assignment }}"
          echo "ğŸŸ¡ Status: Student started working"
